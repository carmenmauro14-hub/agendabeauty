<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Impostazioni Promemoria - BeautyBook</title>
  <link rel="stylesheet" href="navbar.css">
  <link rel="stylesheet" href="reminder-settings.css">
</head>
<body>
  <div id="navbar-placeholder"></div>

  <div class="back-header" onclick="location.href='settings.html'">
    <span class="back-arrow">‹</span> Impostazioni
  </div>

  <main class="reminder-container">
    <h1 class="reminder-title">Impostazioni Promemoria</h1>
    <p class="info-text">
      Personalizza il testo del promemoria WhatsApp che invierai ai clienti.
    </p>

    <!-- Template messaggio (attivo oggi) -->
    <section class="template-group" aria-labelledby="tit-tpl">
      <h3 id="tit-tpl">Testo promemoria</h3>
      <p class="hint">
        Puoi usare variabili come
        <span class="token">{NOME}</span>
        <span class="token">{DATA}</span>
        <span class="token">{ORA}</span>
        <span class="token">{TRATTAMENTI}</span>.
      </p>
      <textarea id="reminder-template" placeholder="Ciao {NOME}! Ti ricordiamo l’appuntamento del {DATA} alle {ORA}. A presto!"></textarea>
      <p class="hint" id="tpl-help">Suggerimento: mantieni il messaggio breve e chiaro.</p>
    </section>

    <!-- Blocco “in arrivo” per automatico (pulito e disattivato) -->
    <ul class="reminder-list coming-soon" aria-disabled="true">
      <li>
        <label>
          <input type="checkbox" id="enable-reminders" disabled>
          Attiva promemoria automatici
        </label>
      </li>
      <li>
        <span class="label">Anticipo promemoria</span>
        <select id="reminder-time" disabled>
          <option value="24h">24 ore prima</option>
          <option value="12h">12 ore prima</option>
          <option value="2h">2 ore prima</option>
        </select>
      </li>
      <li class="soon-note">
        <small>Funzione in arrivo: l’app invierà i promemoria in automatico in base all’anticipo scelto.</small>
      </li>
    </ul>
  </main>

  <script>
    // Navbar
    fetch("navbar.html").then(r => r.text()).then(h => {
      document.getElementById("navbar-placeholder").innerHTML = h;
    });

    // Opzionale: salvataggio locale del template per non perderlo ricaricando la pagina
    (function(){
      const ta = document.getElementById('reminder-template');
      const KEY = 'bb-reminder-template';
      try {
        const saved = localStorage.getItem(KEY);
        if (!ta.value && saved) ta.value = saved;
        ta.addEventListener('input', () => localStorage.setItem(KEY, ta.value));
      } catch(e) {}
    })();
  </script>

  <script src="navbar.js"></script>
  <script type="module" src="auth.js"></script>
</body>
</html>