/* ===== Palette & base ===== */
:root{
  --nav-height: 84px;

  --prim:#d2b8a3;       /* colore primario */
  --text:#a07863;       /* testo principale */
  --muted:#7c6a60;      /* testo attenuato */
  --line:#e6d9d0;       /* linee/bordi */
  --bg:#fff;            /* sfondo base */
  --card:#fff;          /* sfondo card */

  --tint:#f7ede6;       /* tinta chiara */
  --tile:#efe2d8;       /* pill neutra */
  --tile-hover:#e8d7cb; /* pill hover */

  --tabbar-height:72px; /* navbar inferiore */
}

*{box-sizing:border-box}
html,body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  overflow-x:hidden;
}

/* ===== Container pagina ===== */
.stats-container{
  max-width:520px;
  margin:0 auto;
  padding:14px 16px;
  padding-top:calc(20px + env(safe-area-inset-top)); /* spazio top dopo rimozione header */
  padding-bottom:calc(var(--tabbar-height) + env(safe-area-inset-bottom) + 16px);
}

/* ===== Titolo & intro ===== */
.stats-title{
  font-size:28px;
  font-weight:800;
  margin:18px 16px 8px;;
  letter-spacing:-.15px;
  color:var(--text);
}
.info-text{
  font-size:14px;
  color:var(--muted);     /* <- fix: prima era '666' senza # */
  margin:0 0 12px;
  line-height:1.35;       /* più compatto e leggibile */
}

/* ===== Tabs periodo (pill come clienti) ===== */
.filters{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-bottom:8px;
}
.period-tabs{ display:flex; flex-wrap:wrap; gap:12px; }
.period-tabs .tab{
  height:28px;
  padding:0 8px;
  display:inline-flex; align-items:center; justify-content:center;
  background:var(--tile); color:var(--text);
  border:none; border-radius:999px; cursor:pointer;
  font-weight:500; font-size:12px;
}
.period-tabs .tab:hover{ background:var(--tile-hover); }
.period-tabs .tab.active{ background:var(--prim); color:#fff; }

.custom-range{ display:flex; align-items:center; gap:12px; }
.custom-range input[type="date"]{
  height:36px; padding:0 12px;
  border:1px solid var(--line); border-radius:10px;
  background:#fff; color:var(--text); font-size:14px;
}
.custom-range .dash{ color:var(--muted); }
.btn-apply{
  height:36px; padding:0 16px;
  border:none; border-radius:12px;
  background:var(--prim); color:#fff;
  font-weight:800; font-size:14px;
  cursor:pointer;
}

/* ===== Card base ===== */
.card{
  background:var(--card);
  margin:12px 0;
  border-radius:16px;
  border:1px solid var(--line);
  box-shadow:0 6px 16px rgba(0,0,0,.04);
  padding:16px;
}
.card-title{
  margin:0 0 10px;
  font-size:15px;
  font-weight:700;
  color:var(--text);
}

/* ===== KPI ===== */
.kpi-grid{ display:grid; grid-template-columns:1fr; gap:10px; margin-top:6px; }
@media (min-width:420px){ .kpi-grid{ grid-template-columns:repeat(3,1fr);} }

.kpi{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 16px rgba(0,0,0,.04);
}

/* <- richiesto: etichetta 15/700, valore 14/400 */
.kpi-label{
  font-size:15px;
  font-weight:700;
  color:var(--text);
  margin:0 0 4px;
}
.kpi-value{
  font-size:14px;
  font-weight:400;
  color:var(--text);
  letter-spacing:0;
  line-height:1.3;
}

/* ===== Liste (Top trattamenti / clienti) ===== */
.list{ list-style:none; margin:0; padding:0; }
.list li{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 0;
  border-top:1px solid var(--line);
  font-size:15px; color:var(--text);
  font-weight:700;
}
.list li:first-child{ border-top:none; }
.list .name{
  font-size:14px;
  font-weight:400;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.list .meta{
  white-space:nowrap;
  font-size:14px;
  font-weight:400;
  font-variant-numeric:tabular-nums;
}

/* quantità opzionale */
.list .left{ display:flex; align-items:center; gap:10px; min-width:0; }
.list .qty{
  min-width:26px; height:26px; padding:0 8px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--line); border-radius:999px;
  background:#fff; color:var(--text);
  font-weight:409; font-size:14px;
}

/* ===== Grafico: Andamento mese (colonne) ===== */
#trendCard .card-title{ margin-bottom:8px; }

.bars{
  display:flex;
  align-items:flex-end;
  gap:6px;
  height:140px;
  min-width:100%;
  padding:8px 2px;
  box-sizing:border-box;
  border:1px dashed var(--line);
  border-radius:12px;
  background:#fff;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
}
.bar{
  flex:0 0 24px;
  min-height:14px;
  background:#f0dfd4;
  border:1px solid #e6d9d0;
  border-radius:6px 6px 0 0;
  position:relative;
  display:flex;
  align-items:flex-end;
  justify-content:center;
}
.bar .day-label{
  position:absolute;
  bottom:2px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  line-height:1;
  color:var(--text);
  pointer-events:none;
  user-select:none;
  opacity:.95;
}
.bar .tip{
  position:absolute;
  bottom:100%;
  left:50%;
  transform:translate(-50%,-6px);
  padding:3px 6px;
  border-radius:6px;
  background:#fff;
  border:1px solid var(--line);
  font-size:11px;
  color:#6d584b;
  white-space:nowrap;
  opacity:0;
  pointer-events:none;
  transition:opacity .15s ease;
}
.bar:hover .tip{ opacity:1; }

.bars-legend{
  margin-top:6px;
  font-size:12px;
  color:var(--muted);
}

/* ===== Utility ===== */
.hidden{ display:none !important; }

/* ===== Responsive ===== */
@media (max-width:420px){
  .stats-title{ font-size:22px; }
  .kpi-value{ font-size:14px; } /* resta 14 anche su mobile */
}