/* ===== Palette & base ===== */
:root{
  --nav-height: 84px;

  --prim:#d2b8a3;
  --text:#a07863;
  --muted:#7c6a60;
  --line:#e6d9d0;
  --bg:#fff;
  --card:#fff;

  --tint:#f7ede6;
  --tile:#efe2d8;
  --tile-hover:#e8d7cb;

  --tabbar-height:72px; /* navbar inferiore */
}

*{box-sizing:border-box}
html,body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  overflow-x:hidden;
}

/* ===== Back header coerente ===== */
.back-header{
  position:sticky; top:0; z-index:5;
  display:flex; align-items:center; gap:6px;
  padding:10px 16px; background:var(--tint);
  border-bottom:1px solid var(--line); color:var(--prim);
  font-size:18px; font-weight:700; cursor:pointer;
}
.back-arrow{ font-size:24px; line-height:1; }

/* ===== Container pagina ===== */
.stats-container{
  max-width:520px; margin:0 auto;
  padding:14px 16px;
  padding-bottom:calc(var(--tabbar-height) + env(safe-area-inset-bottom) + 16px);
}

/* ===== Titolo & intro ===== */
.stats-title{
  font-size:24px; font-weight:800; margin:0 0 6px;
  letter-spacing:-.15px; color:var(--text);
}
.info-text{
  font-size:14px; color:var(--muted);
  margin:0 0 12px; line-height:1.35;
}

/* ===== Tabs periodo (pill come clienti) ===== */
.filters{ display:flex; flex-direction:column; gap:10px; }
.period-tabs{ display:flex; flex-wrap:wrap; gap:10px; }
.period-tabs .tab{
  height:36px; padding:0 14px;
  display:inline-flex; align-items:center; justify-content:center;
  background:var(--tile); color:var(--text);
  border:none; border-radius:999px; cursor:pointer;
  font-weight:700; font-size:14px;
}
.period-tabs .tab:hover{ background:var(--tile-hover); }
.period-tabs .tab.active{ background:var(--prim); color:#fff; }

.custom-range{ display:flex; align-items:center; gap:10px; }
.custom-range input[type="date"]{
  height:36px; padding:0 12px; border:1px solid var(--line);
  border-radius:10px; background:#fff; color:var(--text); font-size:14px;
}
.custom-range .dash{ color:var(--muted); }
.btn-apply{
  height:36px; padding:0 16px; border:none; border-radius:12px;
  background:var(--prim); color:#fff; font-weight:800; font-size:14px; cursor:pointer;
}

/* ===== Card base ===== */
.card{
  background:var(--card); margin:10px 0; border-radius:16px;
  border:1px solid var(--line); box-shadow:0 6px 16px rgba(0,0,0,.04);
  padding:16px;
}
.card-title{
  margin:0 0 10px; font-size:15px; font-weight:700; color:var(--text);
}

/* ===== KPI ===== */
.kpi-grid{ display:grid; grid-template-columns:1fr; gap:10px; }
@media (min-width:420px){ .kpi-grid{ grid-template-columns:repeat(3,1fr);} }

.kpi{
  background:var(--card); border:1px solid var(--line);
  border-radius:16px; padding:16px; box-shadow:0 6px 16px rgba(0,0,0,.04);
}
.kpi-label{ font-size:13px; color:var(--muted); margin:0 0 6px; }
.kpi-value{
  font-size:26px; font-weight:800; line-height:1.2;
  letter-spacing:-.2px; color:var(--text);
}

/* ===== Liste (Top trattamenti / clienti) ===== */
.list{ list-style:none; margin:0; padding:0; }
.list li{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 0; border-top:1px solid var(--line);
  font-size:14px; color:var(--text);
}
.list li:first-child{ border-top:none; }
.list .name{
  font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.list .meta{
  white-space:nowrap; font-weight:600; font-variant-numeric:tabular-nums;
}

/* quantit√† opzionale */
.list .left{ display:flex; align-items:center; gap:10px; min-width:0; }
.list .qty{
  min-width:26px; height:26px; padding:0 8px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--line); border-radius:999px;
  background:#fff; color:var(--text);
  font-weight:700; font-size:13px;
}

/* ===== Grafico: Andamento mese (colonne) ===== */
#trendCard .card-title{ margin-bottom:8px; }

.bars{
  display:flex;
  align-items:flex-end;
  gap:6px;
  height:140px;
  min-width:100%;
  padding:8px 2px;
  box-sizing:border-box;
  border:1px dashed var(--line);
  border-radius:12px;
  background:#fff;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
}
.bar{
  flex:0 0 24px;
  min-height:14px;
  background:#f0dfd4;
  border:1px solid #e6d9d0;
  border-radius:6px 6px 0 0;
  position:relative;
  display:flex;
  align-items:flex-end;
  justify-content:center;
}
.bar .day-label{
  position:absolute;
  bottom:2px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  line-height:1;
  color:var(--text);
  pointer-events:none;
  user-select:none;
  opacity:.95;
}
.bar .tip{
  position:absolute;
  bottom:100%;
  left:50%;
  transform:translate(-50%,-6px);
  padding:3px 6px;
  border-radius:6px;
  background:#fff;
  border:1px solid var(--line);
  font-size:11px;
  color:#6d584b;
  white-space:nowrap;
  opacity:0;
  pointer-events:none;
  transition:opacity .15s ease;
}
.bar:hover .tip{ opacity:1; }

.bars-legend{
  margin-top:6px;
  font-size:12px;
  color:var(--muted);
}

/* ===== Utility ===== */
.hidden{ display:none !important; }

/* ===== Responsive ===== */
@media (max-width:420px){
  .stats-title{ font-size:22px; }
  .kpi-value{ font-size:24px; }
}